<Window x:Class="ChatP2P.Client.SecurityCenterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Security Center" Height="600" Width="980"
        WindowStartupLocation="CenterOwner"
        Background="#FF2E2E2E">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Search Bar -->
        <TextBox Name="txtSearch" Grid.Row="0" Height="30" Margin="0,0,0,10"
                 Background="#FF3E3E3E" Foreground="White" BorderBrush="#FFFF8C42"
                 FontSize="14" Padding="8" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                 TextChanged="TxtSearch_TextChanged">
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Text" Value="">
                            <Setter Property="Background" Value="#FF3E3E3E"/>
                        </Trigger>
                        <Trigger Property="IsFocused" Value="False">
                            <Setter Property="Foreground" Value="Gray"/>
                        </Trigger>
                        <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource Self}}" Value="">
                            <Setter Property="Foreground" Value="Gray"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>

        <!-- Action Buttons -->
        <WrapPanel Grid.Row="1" Margin="0,0,0,10">
            <Button Name="btnTrust" Content="Mark Trusted" Width="120" Height="30" Margin="0,0,5,5"
                    Background="#FF4CAF50" Foreground="White" Click="BtnTrust_Click"/>
            <Button Name="btnUntrust" Content="Remove Trust" Width="120" Height="30" Margin="0,0,5,5"
                    Background="#FFF44336" Foreground="White" Click="BtnUntrust_Click"/>
            <Button Name="btnCopyFingerprint" Content="Copy Fingerprint" Width="130" Height="30" Margin="0,0,5,5"
                    Background="#FFFF8C42" Foreground="White" Click="BtnCopyFingerprint_Click"/>
            <Button Name="btnDetails" Content="Details" Width="80" Height="30" Margin="0,0,5,5"
                    Background="#FF607D8B" Foreground="White" Click="BtnDetails_Click"/>
            <Button Name="btnResetTofu" Content="Reset TOFU" Width="100" Height="30" Margin="0,0,5,5"
                    Background="#FFFF9800" Foreground="White" Click="BtnResetTofu_Click"/>
            <Button Name="btnImportKey" Content="Import Key" Width="100" Height="30" Margin="0,0,5,5"
                    Background="#FF9C27B0" Foreground="White" Click="BtnImportKey_Click"/>
            <Button Name="btnExportFingerprint" Content="Export My FP" Width="120" Height="30" Margin="0,0,5,5"
                    Background="#FF00BCD4" Foreground="White" Click="BtnExportFingerprint_Click"/>
            <Button Name="btnRequestPqcKeys" Content="ðŸ”‘ Request PQC Keys" Width="140" Height="30" Margin="0,0,5,5"
                    Background="#FFE91E63" Foreground="White" Click="BtnRequestPqcKeys_Click"/>
            <Button Name="btnClose" Content="Close" Width="80" Height="30" Margin="0,0,5,5"
                    Background="#FF757575" Foreground="White" Click="BtnClose_Click"/>
        </WrapPanel>

        <!-- Peers DataGrid -->
        <DataGrid Name="dgPeers" Grid.Row="2" AutoGenerateColumns="False" 
                  Background="#FF3E3E3E" Foreground="White" 
                  GridLinesVisibility="None" HeadersVisibility="Column"
                  RowBackground="#FF4E4E4E" AlternatingRowBackground="#FF5E5E5E"
                  SelectionMode="Single" SelectionUnit="FullRow"
                  CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True">
            
            <DataGrid.Resources>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="#FFFF8C42"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Padding" Value="8,4"/>
                    <Setter Property="BorderBrush" Value="#FF2E2E2E"/>
                    <Setter Property="BorderThickness" Value="0,0,1,0"/>
                </Style>
                <Style TargetType="DataGridCell">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Padding" Value="8,4"/>
                </Style>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#FFFF8C42"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#FF6E6E6E"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.Resources>

            <DataGrid.Columns>
                <DataGridTextColumn Header="Peer" Binding="{Binding Name}" Width="120"/>
                <DataGridCheckBoxColumn Header="Trust" Binding="{Binding Trusted}" Width="60">
                    <DataGridCheckBoxColumn.ElementStyle>
                        <Style TargetType="CheckBox">
                            <Setter Property="IsEnabled" Value="False"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridCheckBoxColumn.ElementStyle>
                </DataGridCheckBoxColumn>
                <DataGridCheckBoxColumn Header="Auth" Binding="{Binding AuthOk}" Width="60">
                    <DataGridCheckBoxColumn.ElementStyle>
                        <Style TargetType="CheckBox">
                            <Setter Property="IsEnabled" Value="False"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridCheckBoxColumn.ElementStyle>
                </DataGridCheckBoxColumn>
                <DataGridCheckBoxColumn Header="PQC" Binding="{Binding HasPqcKey}" Width="50">
                    <DataGridCheckBoxColumn.ElementStyle>
                        <Style TargetType="CheckBox">
                            <Setter Property="IsEnabled" Value="False"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridCheckBoxColumn.ElementStyle>
                </DataGridCheckBoxColumn>
                <DataGridTextColumn Header="Ed25519 FP" Binding="{Binding Fingerprint}" Width="180"/>
                <DataGridTextColumn Header="PQC Fingerprint" Binding="{Binding PqcFingerprint}" Width="180"/>
                <DataGridTextColumn Header="Created" Binding="{Binding CreatedUtc}" Width="100"/>
                <DataGridTextColumn Header="Last Seen" Binding="{Binding LastSeenUtc}" Width="100"/>
                <DataGridTextColumn Header="Note" Binding="{Binding Note}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- My Fingerprint Label -->
        <Label Name="lblMyFingerprint" Grid.Row="2" VerticalAlignment="Bottom" HorizontalAlignment="Left"
               Content="My fingerprint: (loading...)" Foreground="White" FontWeight="Bold" Background="#FF2E2E2E"
               Padding="5" Margin="0,0,0,5"/>
    </Grid>
</Window>